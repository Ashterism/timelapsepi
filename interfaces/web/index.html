<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TimelapsePi</title>
  <link rel="stylesheet" href="/static/style.css">
  <link rel="icon" href="/static/favicon.ico" type="image/x-icon" />
</head>
<body>
  <main class="container">
    <div id="sideMenu" class="side-menu">
      <ul>
        <li><a href="#">Dashboard</a></li>
        <li><a href="#">Settings</a></li>
        <li><a href="#">Connection</a></li>
      </ul>
    </div>
    <div class="header">
      <div class="menu-icon">☰</div>
      <h1>Ashterix<br><span class="subtitle">Timelapse</span></h1>
      <img src="/static/astroPic.png" alt="Logo" class="header-logo">
    </div>

    <div class="accordion">
      <button class="accordion-button">📸 Status</button>
      <div class="accordion-content">
        <div id="system-status" class="metadata-block">
          <p><strong>Battery:</strong> <span id="battery-status">Loading...</span></p>
          <p><strong>Connection:</strong> <span id="connection-status">Loading...</span></p>
          <p><strong>IP:</strong> <span id="ip-address">Loading...</span></p>
        </div>
      </div>
    </div>

    <div class="accordion">
      <button class="accordion-button">🖼️ Photo Preview</button>
      <div class="accordion-content">
        <img id="preview-img" src="/latest.jpg" style="width: 100%; max-width: 400px;" alt="No photo yet" onerror="this.onerror=null; this.src='/static/no-preview.png'; this.alt='No preview available';">
        <div id="photo-metadata" class="metadata-block">
          <p><strong>Timestamp:</strong> <span id="meta-timestamp">Loading...</span></p>
          <p><strong>ISO:</strong> <span id="meta-iso">Loading...</span></p>
          <p><strong>Shutter:</strong> <span id="meta-shutter">Loading...</span></p>
          <p><strong>Aperture:</strong> <span id="meta-aperture">Loading...</span></p>
          <p><strong>File Size:</strong> <span id="meta-filesize">Loading...</span></p>
          <p><strong>Resolution:</strong> <span id="meta-resolution">Loading...</span></p>
        </div>

        <button onclick="takePhoto()">📸 Take Test Photo</button>

      </div>
    </div>

    <div class="accordion">
      <button class="accordion-button">⚙️ Timelapse Config</button>
      <div class="accordion-content">
        <div class="timelapse-controls">
          <label for="interval"><strong>Interval (hh:mm:ss):</strong></label>
          <input type="text" id="interval" name="interval" placeholder="00:01:00" />

          <label for="start-time"><strong>Start Time (ISO or blank):</strong></label>
          <input type="datetime-local" id="start-time" name="start-time" />

          <label><strong>End Condition:</strong></label><br>
          <input type="radio" id="end-count" name="end-type" value="count" checked />
          <label for="end-count">Number of Photos</label>
          <input type="radio" id="end-time" name="end-type" value="time" />
          <label for="end-time">End Time</label>

          <div id="end-count-group">
            <label for="photo-count"><strong>Number of Photos:</strong></label>
            <input type="number" id="photo-count" name="photo-count" />
          </div>

          <div id="end-time-group" style="display:none;">
            <label for="end-time-input"><strong>End Time:</strong></label>
            <input type="datetime-local" id="end-time-input" name="end-time-input" />
          </div>

          <label for="folder-name"><strong>Folder Name (optional):</strong></label>
          <input type="text" id="folder-name" name="folder-name" placeholder="Leave blank to auto-generate" />

          <button onclick="startTimelapse()">🚀 Start Timelapse</button>
          <button onclick="stopTimelapse()">🛑 Stop Timelapse</button>

          <p><strong>All Sessions:</strong></p>
          <ul id="session-list">
            <li>Loading...</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="accordion">
      <button class="accordion-button">📁 Extra Options</button>
      <div class="accordion-content">
        <p>This section can hold additional settings or actions in the future.</p>
      </div>
    </div>
  </main>

<script src="/static/scripts.js"></script>

</body>
</html>